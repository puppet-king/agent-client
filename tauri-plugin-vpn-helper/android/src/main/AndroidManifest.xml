<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android">

  <!-- 1. 基础网络权限 -->
  <uses-permission android:name="android.permission.INTERNET" />
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

  <!-- 2. 前台服务权限（2025年 Android 14+ 必须） -->
  <uses-permission android:name="android.permission.FOREGROUND_SERVICE" />

  <!-- 3. 必须声明具体的服务类型。对于 VPN，通常使用 specialUse 或 systemExempted -->
  <!-- 注意：Android 14+ 要求启动前台服务必须有对应的权限 -->
  <uses-permission android:name="android.permission.FOREGROUND_SERVICE_SPECIAL_USE" />

  <!-- 4. 如果你想在开机时自动启动 VPN（可选） -->
  <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

  <application>
    <!-- 声明 VPN 服务 -->
    <service
      android:name=".MyVpnService"
      android:permission="android.permission.BIND_VPN_SERVICE"
      android:foregroundServiceType="specialUse"
      android:exported="false">
      <intent-filter>
        <action android:name="android.net.VpnService" />
      </intent-filter>

      <!-- 2025 建议：添加元数据说明 specialUse 的用途，以备 Google Play 审核 -->
      <property android:name="android.app.PROPERTY_SPECIAL_USE_FGS_SUBTYPE"
                android:value="VPN service for secure proxy connection" />
    </service>
  </application>

</manifest>